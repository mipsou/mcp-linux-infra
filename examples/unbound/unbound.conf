# Unbound DNS Server Configuration
# MCP Linux Infra v0.3.0

server:
    # Interface d'écoute
    interface: 0.0.0.0
    port: 53

    # Sécurité
    do-ip4: yes
    do-ip6: no
    do-udp: yes
    do-tcp: yes

    # Accès control
    access-control: 0.0.0.0/0 allow
    access-control: 127.0.0.0/8 allow
    access-control: 172.16.0.0/12 allow
    access-control: 192.168.0.0/16 allow

    # Caching
    cache-min-ttl: 300
    cache-max-ttl: 86400

    # Performance
    num-threads: 2
    msg-cache-size: 64m
    rrset-cache-size: 128m
    outgoing-num-tcp: 100
    incoming-num-tcp: 100

    # Logging
    verbosity: 1
    log-queries: no
    log-replies: no
    log-servfail: yes

    # Privacy
    hide-identity: yes
    hide-version: yes

    # DNSSEC
    auto-trust-anchor-file: "/var/lib/unbound/root.key"

    # Zones locales (optionnel)
    # include: "/opt/unbound/etc/unbound/zones/*.conf"

# Forwarders (optionnel - utiliser des DNS publics)
forward-zone:
    name: "."
    # Cloudflare DNS
    forward-addr: 1.1.1.1@853
    forward-addr: 1.0.0.1@853
    # Google DNS (backup)
    forward-addr: 8.8.8.8@853
    forward-addr: 8.8.4.4@853
    # DNS-over-TLS
    forward-tls-upstream: yes

# Zones locales personnalisées
# local-zone: "example.local." static
# local-data: "server1.example.local. IN A 192.168.1.10"
# local-data: "server2.example.local. IN A 192.168.1.11"
